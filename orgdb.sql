DROP DATABASE IF EXISTS `orgdb`;
CREATE DATABASE IF NOT EXISTS `orgdb`;
USE `orgdb`;

CREATE TABLE IF NOT EXISTS `organization` (
	`organization_id` INT(5) AUTO_INCREMENT,
	`name` VARCHAR(100) NOT NULL,
	`description` VARCHAR(500),
	PRIMARY KEY (`organization_id`)
);

INSERT INTO `organization` (`name`, `description`) VALUES
('Alliance of Computer Science Students', 'ACSS UPLB is an established academic and service-oriented organization that aims to develop the skills and abilities of its members, and teach them to be more worthy of the title Iskolar ng Bayan para sa Bayan.'),
('Alliance of Statistics Majors', 'The Alliance of Statistics Majors of the University of the Philippines - Los Baños is an academic organization whose primary goal is to establish a community where Statistics students can develop their statistical thinking while nurturing them to become the future generation of Statisticians.'),
('Computer Science Society', 'An academic organization that promotes computer science in the University.'),
('Mathematical Sciences Society', 'The UPLB Mathematical Sciences Society (UPLB MASS) is an academic organization that caters students under the following programs: BS Mathematics, BS Applied Mathematics, BS Computer Science, BS Statistics, and BS Mathematics and Science Teaching (Major in Math).'),
('Young Software Engineers Society', 'The Young Software Engineers Society is an academic organization that promotes Software Engineering in the field of Computer Science and bridges the gap between the academe and the industry.');

CREATE TABLE IF NOT EXISTS `member` (
	`student_number` CHAR(10) NOT NULL,
	`name` VARCHAR(35) NOT NULL,
	`gender` ENUM('Male', 'Female', 'Non-binary', 'Other', 'Prefer not to say') NOT NULL,
	`degree_program` VARCHAR(30) NOT NULL,
	`academic_batch` YEAR NOT NULL,
	`graduation_date` DATE,
	`graduation_semester` ENUM('First', 'Second'),
	`graduation_year` YEAR,
	PRIMARY KEY (`student_number`)
);

INSERT INTO member (student_number, name, gender, degree_program, academic_batch, graduation_date, graduation_semester, graduation_year) VALUES 
('2023-12847', 'Maria Santos', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2023-45123', 'Jose Reyes', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2022-78956', 'Ana Cruz', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-34521', 'Miguel Garcia', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-67834', 'Carmen Dela Cruz', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-91456', 'Roberto Gonzalez', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-25789', 'Luz Hernandez', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-58234', 'Carlos Morales', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-43876', 'Rosa Villanueva', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-76521', 'Antonio Ramos', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-89345', 'Elena Flores', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-12678', 'Fernando Castro', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-54321', 'Isabel Torres', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-87654', 'Pedro Mendoza', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-23456', 'Gloria Pascual', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-65432', 'Ramon Silva', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-78123', 'Esperanza Aguilar', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-34567', 'Manuel Vargas', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-91234', 'Cristina Jimenez', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-56789', 'Diego Ortega', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-45678', 'Rosario Gutierrez', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-78901', 'Alejandro Navarro', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2023-12389', 'Pilar Medina', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-45612', 'Francisco Herrera', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-78945', 'Dolores Ruiz', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-32156', 'Joaquin Peña', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-65478', 'Mercedes Cabrera', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-98743', 'Salvador Marquez', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-14725', 'Concepcion Romero', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-36985', 'Ricardo Soto', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-58741', 'Amparo Delgado', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-74125', 'Emilio Vega', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-96385', 'Remedios Luna', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-25874', 'Teodoro Campos', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-47851', 'Soledad Moreno', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-63297', 'Patricio Blanco', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-85214', 'Asuncion Guerrero', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-17439', 'Bernardo Prieto', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-39876', 'Milagros Suarez', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-52641', 'Arturo Rubio', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-74185', 'Purificacion Santos', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-96317', 'Esteban Molina', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-18542', 'Consuelo Ortiz', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-41758', 'Leandro Castillo', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-63974', 'Natividad Iglesias', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-87391', 'Aurelio Garrido', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-29516', 'Visitacion Dominguez', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-51732', 'Florencio Gil', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-74958', 'Encarnacion Fuentes', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-16384', 'Rosendo Lozano', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-38729', 'Presentacion Serrano', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-62145', 'Maximo Perez', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-84567', 'Perpetua Velasco', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-27813', 'Crisanto Moya', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-49651', 'Felicidad Soler', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-71394', 'Policarpo Ibañez', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-93726', 'Consolacion Caballero', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-15948', 'Hilario Cano', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-37582', 'Tranquilina Gallego', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-59174', 'Benigno Carrasco', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-81396', 'Dionisia Rico', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-23658', 'Casimiro Mendez', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-45971', 'Anastacia Fernandez', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-67283', 'Herminio Espinosa', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-89517', 'Genoveva Parra', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-12749', 'Placido Hidalgo', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-34186', 'Primitiva Lorenzo', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-56423', 'Saturnino Benitez', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-78659', 'Salvadora Varela', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-91285', 'Eleuterio Santana', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-13572', 'Filomena Reyes', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-35948', 'Prudencio Cruz', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-57164', 'Gregoria Garcia', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-79381', 'Modesto Dela Cruz', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-21637', 'Escolastica Gonzalez', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-43852', 'Cipriano Hernandez', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-65179', 'Nemesia Morales', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-87496', 'Higinio Villanueva', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-29713', 'Potenciana Ramos', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-51829', 'Victoriano Flores', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-74156', 'Marciana Castro', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-96372', 'Fulgencio Torres', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-18594', 'Emerenciana Mendoza', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-42617', 'Apolinario Pascual', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-64833', 'Basilisa Silva', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-86259', 'Crescencio Aguilar', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-28471', 'Telesfora Vargas', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-51684', 'Epifanio Jimenez', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-73297', 'Domitila Ortega', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-95613', 'Anacleto Gutierrez', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-17485', 'Agripina Navarro', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-39751', 'Silvestre Medina', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-62168', 'Felipa Herrera', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-84394', 'Demetrio Ruiz', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-26517', 'Justina Peña', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-48923', 'Anselmo Cabrera', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-71639', 'Leocadia Marquez', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-93856', 'Inocencio Romero', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-15274', 'Bernardina Soto', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-37591', 'Gaudencio Delgado', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-59817', 'Maxima Vega', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-82143', 'Tiburcio Luna', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL),
('2023-24369', 'Eulalia Campos', 'Female', 'BS Computer Science', 2023, NULL, NULL, NULL),
('2022-46785', 'Evaristo Moreno', 'Male', 'BS Statistics', 2022, NULL, NULL, NULL),
('2022-68912', 'Faustina Blanco', 'Female', 'BS Computer Science', 2022, NULL, NULL, NULL),
('2023-91528', 'Macario Guerrero', 'Male', 'BS Statistics', 2023, NULL, NULL, NULL);

CREATE TABLE IF NOT EXISTS `assigns` (
	`student_number` CHAR(10) NOT NULL,
	`organization_id` INT(5) NOT NULL,
	`academic_year` CHAR(9) NOT NULL,
	`semester` ENUM('First', 'Second') NOT NULL,
	`membership_status` ENUM('Active', 'Inactive', 'Alumni') NOT NULL,
	`committee` VARCHAR(30) NOT NULL,
	`role` ENUM('President', 'Executive', 'Member') NOT NULL,
	PRIMARY KEY (`student_number`, `organization_id`, `academic_year`, `semester`, `membership_status`, `committee`, `role`),
	CONSTRAINT `fk_assigns_student_number` FOREIGN KEY (student_number) REFERENCES member (student_number),
	CONSTRAINT `fk_assigns_organization_id` FOREIGN KEY (organization_id) REFERENCES organization (organization_id)
);

INSERT INTO assigns (student_number, organization_id, academic_year, semester, membership_status, committee, role) VALUES
('2023-12847', 1, '2023-2024', 'First', 'Active', 'Executive Committee', 'President'),
('2023-45123', 1, '2023-2024', 'First', 'Active', 'Membership Committee', 'Member'),
('2022-78956', 2, '2022-2023', 'Second', 'Inactive', 'Finance Committee', 'Executive'),
('2023-34521', 1, '2023-2024', 'Second', 'Active', 'Events Committee', 'Member'),
('2023-67834', 3, '2023-2024', 'First', 'Active', 'Executive Committee', 'Executive'),
('2022-91456', 2, '2022-2023', 'First', 'Alumni', 'Membership Committee', 'Member'),
('2023-58234', 1, '2023-2024', 'Second', 'Active', 'Finance Committee', 'Member');


CREATE TABLE IF NOT EXISTS `has` (
	`student_number` CHAR(10) NOT NULL,
	`organization_id` INT(5) NOT NULL,
	`academic_year_joined` CHAR(9) NOT NULL,
	`semester_joined` ENUM('First', 'Second') NOT NULL,
	`organization_batch` VARCHAR(20) NOT NULL,
	PRIMARY KEY (`student_number`, `organization_id`, `academic_year_joined`, `semester_joined`, `organization_batch`),
	CONSTRAINT `fk_has_student_number` FOREIGN KEY (student_number) REFERENCES member (student_number),
	CONSTRAINT `fk_has_organization_id` FOREIGN KEY (organization_id) REFERENCES organization (organization_id)
);

INSERT INTO has (student_number, organization_id, academic_year_joined, semester_joined, organization_batch) VALUES
('2023-12847', 1, '2022-2023', 'First', 'Batch A'),
('2023-45123', 1, '2021-2022', 'Second', 'Batch B'),
('2022-78956', 2, '2020-2021', 'First', 'Batch C'),
('2023-34521', 1, '2023-2024', 'Second', 'Batch A'),
('2023-67834', 3, '2023-2024', 'First', 'Batch D'),
('2022-91456', 2, '2021-2022', 'First', 'Batch C'),
('2023-58234', 1, '2022-2023', 'Second', 'Batch B');


CREATE TABLE IF NOT EXISTS `fee` (
	`fee_id` INT(8) AUTO_INCREMENT,
	`amount` DECIMAL(10, 2) NOT NULL,
	`description` VARCHAR(100),
	`date_issued` DATE NOT NULL,
	`due_date` DATE NOT NULL,
	`date_settled` DATE,
	`payment_status` ENUM('Not Paid', 'Paid') NOT NULL DEFAULT 'Not Paid',
	`academic_year` CHAR(9) NOT NULL,
	`semester` ENUM('First', 'Second') NOT NULL,
	`organization_id` INT(5) NOT NULL,
	`student_number` CHAR(10) NOT NULL,
	PRIMARY KEY (`fee_id`),
	CONSTRAINT `fk_fee_organization_id` FOREIGN KEY (organization_id) REFERENCES organization (organization_id),
	CONSTRAINT `fk_fee_student_number` FOREIGN KEY (student_number) REFERENCES member (student_number)
);

INSERT INTO fee (amount, description, date_issued, due_date, date_settled, payment_status, academic_year, semester, organization_id, student_number) VALUES
(1500.00, 'Membership Fee', '2023-08-01', '2023-09-01', '2023-08-25', 'Paid', '2023-2024', 'First', 1, '2023-12847'),
(1200.00, 'Event Fee', '2023-09-15', '2023-10-15', NULL, 'Not Paid', '2023-2024', 'First', 1, '2023-45123'),
(1300.00, 'Late Fee', '2022-02-01', '2022-03-01', '2022-02-20', 'Paid', '2021-2022', 'Second', 2, '2022-78956'),
(1000.00, 'Membership Fee', '2023-10-01', '2023-11-01', NULL, 'Not Paid', '2023-2024', 'Second', 1, '2023-34521'),
(2000.00, 'Special Contribution', '2023-08-10', '2023-09-10', '2023-09-05', 'Paid', '2023-2024', 'First', 3, '2023-67834'),
(1400.00, 'Membership Fee', '2022-08-01', '2022-09-01', '2022-08-25', 'Paid', '2021-2022', 'First', 2, '2022-91456'),
(1600.00, 'Event Fee', '2023-11-01', '2023-12-01', NULL, 'Not Paid', '2023-2024', 'Second', 1, '2023-58234');
